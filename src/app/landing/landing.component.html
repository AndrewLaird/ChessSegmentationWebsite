<div class='container'> 
    <!-- we have to input a user picture
        or video at certain timestamp
        call our api
        and then display the chess board + fen
        and these options
        -- buttons toggling persepective and who's turn it is
        -- edit chessboard at lichess
        -- analysze board at lichess 
        -- analysze board at chess.com
    -->
    <div class="image-upload">
        <div>
            <div clas="col-lg-6 col-md-12 align-middle">
                <div>Image</div>
            </div>
            <div clas="col-lg-6 col-md-12">
                <select class="upload_examples">
                    <option value="">j</option>
                </select>
                <form action="/api"  method="post" enctype="multipart/form-data">
                    <input #chessboard_input name='chessboard' class="hidden" id="input-file-id" (change)="upload(chessboard_input.files)" type="file" />
                    <label for="input-file-id" class='upload-button'>Upload Chessboard</label>
                    <p class='text-center chosen-file-name'>{{filename}}</p>
                </form>
            </div>
        </div>
        <div>
            {{message}}
        </div>
    </div>
    <div class="loading" *ngIf="loading">
        <img class='rotating mx-auto' src="assets/img/loadingRook.png">
    </div>
    <!--
        <div  class= "result-box">
    -->
    <div  class= "result-box" *ngIf="doneLoading">
        <div class='uploaded-image'>
            Uploaded Image:
        </div>
        <div>
            <img [src]="imageURL" height="200px" *ngIf="imageURL">
        </div>
        <div class='row mt-2'>
            <div class='cropped-img col-lg-6 col-md-12'>
                <div class>
                    Detected Chessboard Location:
                </div>
                <img height='300px' [src]="imageURL" (load)="draw_cropped_image()" id="croppedImage">
            </div>
            <div class='col-lg-6 col-md-12'>
                <div class>
                    Detected Pieces:
                </div>
                <app-chess-board #childChessboard [fen]="visible_fen"></app-chess-board>
            </div>
        </div>
        <div>
            <div>
                Fen:
            </div>
            <div>
                {{fen}} {{move}} - - 0 1
            </div>
        </div>
        <div class="row justify-content-center pt-5">
            <div class='col'>
                <div>
                    <label>
                        Perspective:
                    </label>
                </div>
                <div>
                    <select class="perspectiveSelect" [(ngModel)]="perspective" (ngModelChange)="reverse_fen()">
                        <option value='w'>
                        White
                        </option>
                        <option value='b'>
                        Black
                        </option>
                    </select>
                </div>
                <img class='selectImg' [src]="perspective=='w'? 'assets/img/whiteking.png' : 'assets/img/bk.png'">
            </div>
            <div class='col'>
                <button class="interact-button" (click)="flip_board()">Flip Board</button>
                <button class="interact-button mt-1" (click)="copyToClipboard()">Copy To Clipboard</button>
                <textarea id='copyArea' style="opacity:0; width:0; height:0;">{{fen}} {{move}} - - 0 1</textarea>
            </div>
            <div class="row mt-5 justify-content-center">
                <div class='col-3 '>
                </div>
                <div class='col-3 '>
                </div>
            </div>
            <div class="lichess mt-2 col">
                <label>
                    <img src="assets/img/lichesshorse.png" class='logo'>
                    Lichess
                </label>
                <hr class='w-100'>
                <div class='row'>
                    <a href='https://lichess.org/editor/{{fen}}_{{move}}'>
                        <label>Editor</label>
                    </a>
                    <a href='https://lichess.org/analysis/{{fen}}_{{move}}'> 
                        <label>Analysis</label>
                    </a>
                </div>
            </div>
            <div class="chesscom mt-2 col">
                <label>
                    <img src="assets/img/chesscom.png" class='logo'>
                </label>
                <hr class='w-100'>
                <div class='row'>
                    <a href='https://chess.com/analysis'> 
                        <label>Analysis</label>
                    </a>
                    <label style='font-size:.7em'>(Requires Copy/Paste)</label>
                </div>
            </div>
        </div>
    </div>
